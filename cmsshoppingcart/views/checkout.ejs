<% include layout/header %>
   
    <% if (typeof cart !== 'undefined'){ %>
        <h1>My cart</h1>
        <table>
            <tr><th>
                Image
            </th>
        <th>Title</th>
    <th>Price</th>
    <th>Qty</th>
    <th> </th>
    <th>Subtotal</th>
</tr>
    <% var total=0; %>
    <% cart.forEach(product =>{ %>
        <% var sub = parseFloat(product.qty * product.price).toFixed(2);
        total += +sub; %>
    <tr>
        <td> <img height="200px" width="150px" src="<%= product.image %>" alt=""></td>
        <td><%= product.title %> </td>
        <td><%= product.price %> </td>
        <td><%= product.qty %> </td>
        <td>
            <a href="/cart/update/<%= product.title %>?action=add">+</a>
            <a href="/cart/update/<%= product.title %>?action=remove">-</a>
            <a href="/cart/update/<%= product.title %>?action=clear">clear</a>
        </td>
        <td>$ <%= sub %></td>
    </tr><% }); %>
    <tr>
        <td colspan="6" align="right"> 
            <b>total:</b>$ <%= parseFloat(total).toFixed(2) %>    
        </td>

    </tr>
    <tr>
        <td colspan="5"  align="right">
            <a href="/cart/clear" class="btn btn-danger">Clear cart</a>
        </td>
        <td align="right">
            <a href="#" class="btn btn-primary"> buy now</a>
        </td>
    </tr>
        </table>
        <% } else {%>
            <h1>Your cart is empty</h1>
            <% } %>
            
<% include layout/footer %>